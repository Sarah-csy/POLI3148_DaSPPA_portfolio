---
title: "Outline (Inclass notes)"
output: html_document
date: "2023-09-28"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Outline

### 0. Load the `tidyverse` Packages

This section loads the packages we need in this lecture.

```{r}
library(tidyverse)
```

### 1. Import and Export the V-Dem Data

This section loads the VDEM dataset and describe its basic information

```{r}
d <- read_csv("_DataPublic_/vdem/1984_2022/vdem_1984_2022_external.csv")
```

### 2. to take a subset of *columns* in the existing data: `select`

Our second step is to select economic development indicators

First we look at the identifiers of the indicator

```{r}
names(d)
```

Select country year column --\> only distinct

Select country year column --\> only distinct country_names

```{r}
d |> select(country_name, country_id, year) |>
  distinct(country_name)
```

Select only e_gdp (GDP) and e_gdppc (GDP per capita)

```{r}
d |> select(country_name, country_id, year, e_gdp, e_gdppc)
```

Create a new dataset

```{r}
d_gdp <- d |>
  select(country_name, country_id, year, e_gdp, e_gdppc)
```

### 3. to rename columns: `rename`

```{r}
d_gdp <- d_gdp |>
  rename("GDP" = "e_gdp","GDP_per_Capita" = "e_gdppc", "Country" = "country_name", "ID" = "country_id", "Year" = "year")
```

### 4. to take a subset of *rows* by some simple conditions: `slice_`

get countries-years with highest GDP

d

```{r}
d_gdp |>
  slice_max(order_by = GDP, n = 10)
```

get random sample (every time you run, you get a different result)

```{r}
d_gdp |>
  slice_sample(n = 10)

```

### 5. to take a subset of *rows* by some more complicated conditions: `filter`

want 2000-2005

```{r}
d_gdp |>
  filter(Year>=2000 & Year<=2005 & Country == "China")
```

### 6. to sort the rows based on the value of one or multiple columns: `arrange`

arrange by GDP per Capita (asc.)

```{r}
d_gdp |>
  arrange(GDP_per_Capita)
```

arrange by GDP per Capita (desc.) use minus "-" sign

```{r}
d_gdp |>
  arrange(-GDP_per_Capita)
```

### 7. to perform (4) (5) (6) group by group: `group_by`, `ungroup`

### 8. to create new columns in the data: `group_by`, `mutate`, `ungroup`

### 9. to summarize the data: `group_by`, `summarise`, `ungroup`
